<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Mongoid::Tree [mongoid-tree 0.3.0]</title>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'>
    <link href='../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <div class='name'>
          <span class='type'>Module</span>
          Mongoid::Tree
        </div>
        <ol class='paths'>
          <li>
            <a href="../../files/lib/mongoid/tree/traversal_rb.html">lib/mongoid/tree/traversal.rb</a>
          </li>
          <li class='other'>
            <a href="../../files/lib/mongoid/tree_rb.html">lib/mongoid/tree.rb</a>
          </li>
          <li>
            <a class='show' href='#' onclick='this.parentNode.parentNode.className += " expanded"; this.parentNode.removeChild(this); return false'>show all</a>
          </li>
        </ol>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <h1><a href="Tree.html">Mongoid::Tree</a></h1>
            <p>
            This module extends any Mongoid document with tree functionality.
            </p>
            <h2>Usage</h2>
            <p>
            Simply include the module in any Mongoid document:
            </p>
            <pre>class Node&#x000A;  include Mongoid::Document&#x000A;  include Mongoid::Tree&#x000A;end</pre>
            <h3>Using the tree structure</h3>
            <p>
            Each document references many children. You can access them using the
            <tt><a href="Tree.html#M000006">children</a></tt> method.
            </p>
            <pre>node = Node.create&#x000A;node.children.create&#x000A;node.children.count # =&gt; 1</pre>
            <p>
            Every document references one parent (unless it&#8217;s a root document).
            </p>
            <pre>node = Node.create&#x000A;node.parent # =&gt; nil&#x000A;node.children.create&#x000A;node.children.first.parent # =&gt; node</pre>
            <h3>Destroying</h3>
            <p>
            <a href="Tree.html">Mongoid::Tree</a> does not handle destroying of nodes
            by default. However it provides several strategies that help you to deal
            with children of deleted documents. You can simply add them as
            <tt>before_destroy</tt> callbacks.
            </p>
            <p>
            Available strategies are:
            </p>
            <ul>
            <li>:<a href="Tree.html#M000025">nullify_children</a> &#8212; Sets the
            children&#8217;s parent_id to null
            
            </li>
            <li>:<a href="Tree.html#M000026">move_children_to_parent</a> &#8212; Moves the
            children to the current document&#8217;s parent
            
            </li>
            <li>:<a href="Tree.html#M000028">destroy_children</a> &#8212; Destroys all
            children by calling their destroy method (invokes callbacks)
            
            </li>
            <li>:<a href="Tree.html#M000027">delete_descendants</a> &#8212; Deletes all
            descendants using a database query (doesn&#8217;t invoke callbacks)
            
            </li>
            </ul>
            <p>
            Example:
            </p>
            <pre>class Node&#x000A;  include Mongoid::Document&#x000A;  include Mongoid::Tree&#x000A;&#x000A;  before_destroy :nullify_children&#x000A;end</pre>
            <h3>Callbacks</h3>
            <p>
            <a href="Tree.html">Mongoid::Tree</a> offers callbacks for its rearranging
            process. This enables you to rebuild certain fields when the document was
            moved in the tree. Rearranging happens before the document is validated.
            This gives you a chance to validate your additional changes done in your
            callbacks. See ActiveModel::Callbacks and ActiveSupport::Callbacks for
            further details on callbacks.
            </p>
            <p>
            Example:
            </p>
            <pre>class Page&#x000A;  include Mongoid::Document&#x000A;  include Mongoid::Tree&#x000A;&#x000A;  after_rearrange :rebuild_path&#x000A;&#x000A;  field :slug&#x000A;  field :path&#x000A;&#x000A;  private&#x000A;&#x000A;  def rebuild_path&#x000A;    self.path = self.ancestors_and_self.collect(&amp;:slug).join('/')&#x000A;  end&#x000A;end</pre>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000005">after_rearrange</a></li>
              <li><a href="#M000004">before_rearrange</a></li>
              <li><a href="#M000003">leaves</a></li>
              <li><a href="#M000001">root</a></li>
              <li><a href="#M000002">roots</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000016">ancestor_of?</a></li>
              <li><a href="#M000014">ancestors</a></li>
              <li><a href="#M000015">ancestors_and_self</a></li>
              <li><a href="#M000006">children</a></li>
              <li><a href="#M000027">delete_descendants</a></li>
              <li><a href="#M000012">depth</a></li>
              <li><a href="#M000019">descendant_of?</a></li>
              <li><a href="#M000017">descendants</a></li>
              <li><a href="#M000018">descendants_and_self</a></li>
              <li><a href="#M000028">destroy_children</a></li>
              <li><a href="#M000011">leaf?</a></li>
              <li><a href="#M000022">leaves</a></li>
              <li><a href="#M000026">move_children_to_parent</a></li>
              <li><a href="#M000025">nullify_children</a></li>
              <li><a href="#M000007">parent</a></li>
              <li><a href="#M000008">parent= document</a></li>
              <li><a href="#M000009">parent_ids</a></li>
              <li><a href="#M000023">rearrange_children!</a></li>
              <li><a href="#M000024">rearrange_children?</a></li>
              <li><a href="#M000013">root</a></li>
              <li><a href="#M000010">root?</a></li>
              <li><a href="#M000020">siblings</a></li>
              <li><a href="#M000021">siblings_and_self</a></li>
            </ol>
          </div>
          <div id='context'>
            <div id='includes'>
              <h2>Included modules</h2>
              <ol>
                <li><a href="Tree/Traversal.html">Traversal</a></li>
              </ol>
            </div>
          </div>
          <div id='section'>
            <div id='class-list'>
              <h2>Classes and Modules</h2>
              Module <a href="Tree/Traversal.html" class="link">Mongoid::Tree::Traversal</a><br />
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='method public-class' id='method-M000005'>
                <a name='M000005'></a>
                <div class='synopsis'>
                  <span class='name'>after_rearrange</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Sets a callback that is called after the document is rearranged (Generated
                  by ActiveSupport)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000005-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000005-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 143</span>&#x000A;    </pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000004'>
                <a name='M000004'></a>
                <div class='synopsis'>
                  <span class='name'>before_rearrange</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Sets a callback that is called before the document is rearranged (Generated
                  by ActiveSupport)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000004-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000004-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 138</span>&#x000A;    </pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000003'>
                <a name='M000003'></a>
                <div class='synopsis'>
                  <span class='name'>leaves</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns all leaves (be careful, currently involves two queries)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000003-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000003-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 115</span>&#x000A;    </pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000001'>
                <a name='M000001'></a>
                <div class='synopsis'>
                  <span class='name'>root</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the first root document
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000001-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000001-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 107</span>&#x000A;    </pre>
                </div>
              </div>
              <div class='method public-class' id='method-M000002'>
                <a name='M000002'></a>
                <div class='synopsis'>
                  <span class='name'>roots</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns all root documents
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000002-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000002-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 111</span>&#x000A;    </pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000016'>
                <a name='M000016'></a>
                <div class='synopsis'>
                  <span class='name'>ancestor_of?</span>
                  <span class='arguments'>(other)</span>
                </div>
                <div class='description'>
                  <p>
                  Is this document an ancestor of the other document?
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000016-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000016-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 204</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ancestor_of?</span>(<span class="ruby-identifier">other</span>)&#x000A;      <span class="ruby-identifier">other</span>.<span class="ruby-identifier">parent_ids</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000014'>
                <a name='M000014'></a>
                <div class='synopsis'>
                  <span class='name'>ancestors</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns this document&#8217;s ancestors
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000014-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000014-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 192</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ancestors</span>&#x000A;      <span class="ruby-identifier">base_class</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">:_id</span>.<span class="ruby-identifier">in</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">parent_ids</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000015'>
                <a name='M000015'></a>
                <div class='synopsis'>
                  <span class='name'>ancestors_and_self</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns this document&#8217;s ancestors and itself
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000015-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000015-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 198</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ancestors_and_self</span>&#x000A;      <span class="ruby-identifier">ancestors</span> <span class="ruby-operator">+</span> [<span class="ruby-keyword kw">self</span>]&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000006'>
                <a name='M000006'></a>
                <div class='synopsis'>
                  <span class='name'>children</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns a list of the document&#8217;s children. It&#8217;s a
                  <tt>references_many</tt> association. (Generated by Mongoid)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000006-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000006-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 148</span>&#x000A;    </pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000027'>
                <a name='M000027'></a>
                <div class='synopsis'>
                  <span class='name'>delete_descendants</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Deletes all children using the database (doesn&#8217;t invoke callbacks)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000027-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000027-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 270</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_descendants</span>&#x000A;      <span class="ruby-identifier">base_class</span>.<span class="ruby-identifier">delete_all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:parent_ids</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span> })&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000012'>
                <a name='M000012'></a>
                <div class='synopsis'>
                  <span class='name'>depth</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the depth of this document (number of ancestors)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000012-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000012-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 180</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">depth</span>&#x000A;      <span class="ruby-identifier">parent_ids</span>.<span class="ruby-identifier">count</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000019'>
                <a name='M000019'></a>
                <div class='synopsis'>
                  <span class='name'>descendant_of?</span>
                  <span class='arguments'>(other)</span>
                </div>
                <div class='description'>
                  <p>
                  Is this document a descendant of the other document?
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000019-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000019-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 222</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">descendant_of?</span>(<span class="ruby-identifier">other</span>)&#x000A;      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parent_ids</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">other</span>.<span class="ruby-identifier">id</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000017'>
                <a name='M000017'></a>
                <div class='synopsis'>
                  <span class='name'>descendants</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns this document&#8217;s descendants
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000017-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000017-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 210</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">descendants</span>&#x000A;      <span class="ruby-identifier">base_class</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">:parent_ids</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000018'>
                <a name='M000018'></a>
                <div class='synopsis'>
                  <span class='name'>descendants_and_self</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns this document&#8217;s descendants and itself
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000018-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000018-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 216</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">descendants_and_self</span>&#x000A;      [<span class="ruby-keyword kw">self</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">descendants</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000028'>
                <a name='M000028'></a>
                <div class='synopsis'>
                  <span class='name'>destroy_children</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Destroys all children by calling their (does invoke callbacks)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000028-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000028-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 276</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">destroy_children</span>&#x000A;      <span class="ruby-identifier">children</span>.<span class="ruby-identifier">destroy_all</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000011'>
                <a name='M000011'></a>
                <div class='synopsis'>
                  <span class='name'>leaf?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Is this document a leaf node (has no children)?
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000011-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000011-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 174</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">leaf?</span>&#x000A;      <span class="ruby-identifier">children</span>.<span class="ruby-identifier">empty?</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000022'>
                <a name='M000022'></a>
                <div class='synopsis'>
                  <span class='name'>leaves</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns all leaves of this document (be careful, currently involves two
                  queries)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000022-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000022-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 240</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">leaves</span>&#x000A;      <span class="ruby-identifier">base_class</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">:_id</span>.<span class="ruby-identifier">nin</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">base_class</span>.<span class="ruby-identifier">only</span>(<span class="ruby-identifier">:parent_id</span>).<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:parent_id</span>)).<span class="ruby-identifier">and</span>(<span class="ruby-identifier">:parent_ids</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">id</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000026'>
                <a name='M000026'></a>
                <div class='synopsis'>
                  <span class='name'>move_children_to_parent</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Moves all children to this documents parent
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000026-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000026-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 264</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">move_children_to_parent</span>&#x000A;      <span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:parent_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parent_id</span>) }&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000025'>
                <a name='M000025'></a>
                <div class='synopsis'>
                  <span class='name'>nullify_children</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Nullifies all children&#8217;s parent_id
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000025-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000025-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 258</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">nullify_children</span>&#x000A;      <span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">parent</span> = <span class="ruby-keyword kw">nil</span>; <span class="ruby-identifier">c</span>.<span class="ruby-identifier">save</span> }&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000007'>
                <a name='M000007'></a>
                <div class='synopsis'>
                  <span class='name'>parent</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns the document&#8217;s parent (unless it&#8217;s a root document).
                  It&#8217;s a <tt>referenced_in</tt> association. (Generated by Mongoid)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000007-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000007-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 153</span>&#x000A;    </pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000008'>
                <a name='M000008'></a>
                <div class='synopsis'>
                  <span class='name'>parent= document<br /></span>
                </div>
                <div class='description'>
                  <p>
                  Sets this documents parent document. (Generated by Mongoid)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000008-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000008-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 161</span>&#x000A;    </pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000009'>
                <a name='M000009'></a>
                <div class='synopsis'>
                  <span class='name'>parent_ids</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns a list of the document&#8217;s <a
                  href="Tree.html#M000009">parent_ids</a>, starting with the root node.
                  (Generated by Mongoid)
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000009-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000009-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 166</span>&#x000A;    </pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000023'>
                <a name='M000023'></a>
                <div class='synopsis'>
                  <span class='name'>rearrange_children!</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Forces rearranging of all children after next save
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000023-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000023-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 246</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rearrange_children!</span>&#x000A;      <span class="ruby-ivar">@rearrange_children</span> = <span class="ruby-keyword kw">true</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000024'>
                <a name='M000024'></a>
                <div class='synopsis'>
                  <span class='name'>rearrange_children?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Will the children be rearranged after next save?
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000024-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000024-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 252</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rearrange_children?</span>&#x000A;      <span class="ruby-operator">!</span><span class="ruby-operator">!</span><span class="ruby-ivar">@rearrange_children</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000013'>
                <a name='M000013'></a>
                <div class='synopsis'>
                  <span class='name'>root</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns this document&#8217;s root node
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000013-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000013-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 186</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">root</span>&#x000A;      <span class="ruby-identifier">base_class</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">parent_ids</span>.<span class="ruby-identifier">first</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000010'>
                <a name='M000010'></a>
                <div class='synopsis'>
                  <span class='name'>root?</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Is this document a root node (has no parent)?
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000010-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000010-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 168</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">root?</span>&#x000A;      <span class="ruby-identifier">parent_id</span>.<span class="ruby-identifier">nil?</span>&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000020'>
                <a name='M000020'></a>
                <div class='synopsis'>
                  <span class='name'>siblings</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns this document&#8217;s siblings
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000020-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000020-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 228</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">siblings</span>&#x000A;      <span class="ruby-identifier">siblings_and_self</span> <span class="ruby-operator">-</span> [<span class="ruby-keyword kw">self</span>]&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000021'>
                <a name='M000021'></a>
                <div class='synopsis'>
                  <span class='name'>siblings_and_self</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Returns this document&#8217;s siblings and itself
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000021-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000021-source'><span class="ruby-comment cmt"># File lib/mongoid/tree.rb, line 234</span>&#x000A;    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">siblings_and_self</span>&#x000A;      <span class="ruby-identifier">base_class</span>.<span class="ruby-identifier">where</span>(<span class="ruby-identifier">:parent_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parent_id</span>)&#x000A;    <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
